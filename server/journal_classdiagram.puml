@startuml MindHaven
title MindHaven - Journal Management Feature (Frontend + Backend)

skinparam packageStyle rectangle
skinparam class {
  BackgroundColor Snow
  BorderColor Black
  ArrowColor Black
}

' ===================== FRONTEND (React) =====================
package "Frontend (React)" {
  class JournalListPage
  class JournalDetailPage
  class JournalCreatePage
  class JournalEditPage
  class JournalStatsPage
  class JournalCalendarPage
}

' ===================== BACKEND (Node/Express) =====================
package "Backend (Node/Express)" {
  class JournalController {
    +createJournal(req, res)
    +updateJournal(req, res)
    +deleteJournal(req, res)
    +listJournals(req, res)
    +getJournalById(req, res)
    +filterByTag(req, res)
    +sortByDate(req, res)
  }

  class Journal {
    -id : int
    -user_id : int
    -title : string
    -content : text
    -tags : string[]
    -created_at : date
    +createJournal()
    +editJournal()
    +deleteJournal()
    +filterByTag()
    +sortByDate()
  }

  class Tag {
    -id : int
    -name : string
    +addTag()
    +removeTag()
  }

  class Database {
    +connect()
    +query(sql, params)
    +close()
  }
}

' ===================== DATABASE (MySQL) =====================
package "Database (MySQL)" {
  class journals {
    id : int
    user_id : int
    title : string
    content : text
    tags : string
    created_at : date
  }
  class tags {
    id : int
    journal_id : int
    name : string
  }
}

' ===================== CONNECTIONS =====================
' --- Frontend to Backend ---
JournalListPage -[#blue]-> JournalController : GET /api/journals
JournalDetailPage -[#blue]-> JournalController : GET /api/journals/:id
JournalCreatePage -[#blue]-> JournalController : POST /api/journals
JournalEditPage -[#blue]-> JournalController : PUT /api/journals/:id
JournalStatsPage -[#blue]-> JournalController : GET /api/journals/stats
JournalCalendarPage -[#blue]-> JournalController : GET /api/journals/calendar

' --- Backend Internal Relations ---
JournalController --> Journal : uses
Journal "*" --> "*" Tag : includes
JournalController --> Database : executes SQL queries

' --- Database Relations ---
Journal --> journals
Tag --> tags

@enduml
